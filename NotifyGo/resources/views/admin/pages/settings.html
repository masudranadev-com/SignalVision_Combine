<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - SignalNode Admin</title>
    <link rel="stylesheet" href="/resources/css/admin.css">
</head>
<body>
    <!-- Login Page -->
    <div id="loginPage" class="login-container">
        <div class="login-box">
            <div class="login-header">
                <h1>SignalNode</h1>
                <p>Admin Panel</p>
            </div>
            <div id="loginError"></div>
            <form id="loginForm">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" placeholder="Enter username" required>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" placeholder="Enter password" required>
                </div>
                <button type="submit" class="btn">Sign In</button>
            </form>
            <p style="margin-top: 20px; text-align: center; color: var(--text-muted); font-size: 13px;">
                Default credentials: admin / admin123
            </p>
        </div>
    </div>

    <!-- Dashboard -->
    <div id="dashboard" class="dashboard">
        <nav class="navbar">
            <div class="navbar-brand">SignalNode</div>
            <div class="navbar-menu">
                <a href="/admin/dashboard">Dashboard</a>
                <a href="/admin/trades">Trades</a>
                <a href="/admin/settings" class="active">Settings</a>
            </div>
            <div class="navbar-user">
                <div class="user-info">
                    <span>Welcome, <strong id="userDisplay">Admin</strong></span>
                </div>
                <button class="btn-logout" onclick="logout()">Logout</button>
            </div>
        </nav>

        <div class="container">
            <h1 class="mb-3">Settings</h1>

            <!-- System Information -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">System Information</h3>
                </div>
                <div class="card-body">
                    <table class="trades-table">
                        <tbody>
                            <tr>
                                <td><strong>Server Status</strong></td>
                                <td><span class="badge badge-running">Running</span></td>
                            </tr>
                            <tr>
                                <td><strong>API URL</strong></td>
                                <td id="apiUrl">http://localhost:8000</td>
                            </tr>
                            <tr>
                                <td><strong>WebSocket Connections</strong></td>
                                <td>Binance: <span class="badge badge-running">Connected</span> | Bybit: <span class="badge badge-running">Connected</span></td>
                            </tr>
                            <tr>
                                <td><strong>Auto-Refresh Interval</strong></td>
                                <td>2 seconds</td>
                            </tr>
                            <tr>
                                <td><strong>Price Update Threshold</strong></td>
                                <td>0.02% (2 basis points)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Account Settings -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Account Settings</h3>
                </div>
                <div class="card-body">
                    <form id="accountForm" onsubmit="return false;">
                        <div class="form-group">
                            <label>Username</label>
                            <input type="text" id="settingsUsername" value="admin" readonly>
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="settingsEmail" placeholder="admin@signalnode.com">
                        </div>
                        <div class="form-group">
                            <label>Role</label>
                            <input type="text" id="settingsRole" value="Administrator" readonly>
                        </div>
                        <button type="button" class="btn-secondary" onclick="alert('This feature is coming soon!')">Update Profile</button>
                    </form>
                </div>
            </div>

            <!-- Change Password -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Change Password</h3>
                </div>
                <div class="card-body">
                    <form id="passwordForm" onsubmit="return false;">
                        <div class="form-group">
                            <label>Current Password</label>
                            <input type="password" id="currentPassword" placeholder="Enter current password">
                        </div>
                        <div class="form-group">
                            <label>New Password</label>
                            <input type="password" id="newPassword" placeholder="Enter new password">
                        </div>
                        <div class="form-group">
                            <label>Confirm New Password</label>
                            <input type="password" id="confirmPassword" placeholder="Confirm new password">
                        </div>
                        <button type="button" class="btn-secondary" onclick="alert('This feature is coming soon!')">Change Password</button>
                    </form>
                </div>
            </div>

            <!-- Preferences -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Preferences</h3>
                </div>
                <div class="card-body">
                    <form id="preferencesForm">
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="enableNotifications" checked>
                                Enable Browser Notifications
                            </label>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="enableSounds" checked>
                                Enable Sound Alerts
                            </label>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="autoRefresh" checked>
                                Auto-Refresh Dashboard (2s)
                            </label>
                        </div>
                        <div class="form-group">
                            <label>Theme</label>
                            <select id="themeSelect">
                                <option value="dark" selected>Dark Theme</option>
                                <option value="light">Light Theme (Coming Soon)</option>
                            </select>
                        </div>
                        <button type="button" class="btn-secondary" onclick="savePreferences()">Save Preferences</button>
                    </form>
                </div>
            </div>

            <!-- API Access -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">API Access</h3>
                </div>
                <div class="card-body">
                    <p class="text-muted mb-2">Use these endpoints to integrate with external systems:</p>
                    <table class="trades-table">
                        <thead>
                            <tr>
                                <th>Endpoint</th>
                                <th>Method</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>/api/trades</code></td>
                                <td><span class="badge badge-long">GET</span></td>
                                <td>Get all trades</td>
                            </tr>
                            <tr>
                                <td><code>/api/prices</code></td>
                                <td><span class="badge badge-long">GET</span></td>
                                <td>Get real-time prices</td>
                            </tr>
                            <tr>
                                <td><code>/api/stats</code></td>
                                <td><span class="badge badge-long">GET</span></td>
                                <td>Get statistics</td>
                            </tr>
                            <tr>
                                <td><code>/api/config-trade</code></td>
                                <td><span class="badge badge-short">POST</span></td>
                                <td>Add/Update/Delete trade</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- About -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">About</h3>
                </div>
                <div class="card-body">
                    <p><strong>SignalNode</strong></p>
                    <p>Real-time trading signal monitoring system</p>
                    <p class="text-muted text-small">Version 1.0.0</p>
                    <p class="text-muted text-small">Â© 2025 SignalNode. All rights reserved.</p>
                </div>
            </div>
        </div>
    </div>

    <script src="/resources/js/admin.js"></script>
    <script>
        // Set API URL dynamically
        document.getElementById('apiUrl').textContent = API_URL;

        function savePreferences() {
            const prefs = {
                notifications: document.getElementById('enableNotifications').checked,
                sounds: document.getElementById('enableSounds').checked,
                autoRefresh: document.getElementById('autoRefresh').checked,
                theme: document.getElementById('themeSelect').value
            };

            localStorage.setItem('preferences', JSON.stringify(prefs));
            alert('Preferences saved successfully!');
        }

        // Load saved preferences
        window.addEventListener('DOMContentLoaded', () => {
            const saved = localStorage.getItem('preferences');
            if (saved) {
                const prefs = JSON.parse(saved);
                document.getElementById('enableNotifications').checked = prefs.notifications;
                document.getElementById('enableSounds').checked = prefs.sounds;
                document.getElementById('autoRefresh').checked = prefs.autoRefresh;
                document.getElementById('themeSelect').value = prefs.theme;
            }
        });
    </script>
</body>
</html>
